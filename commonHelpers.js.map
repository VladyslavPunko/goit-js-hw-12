{"version":3,"file":"commonHelpers.js","sources":["../src/img/bi_x-octagon.png","../src/js/render-functions.js","../src/js/pixaby-api.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFpSURBVHgBrZQ9UsMwEIXXQoZhcgCobU6RNKlygPTOKUhPDz00UOBbpE9OgX0FD8xQkBAbrYkyirQrK3Fe5bHX79Nqf6JqPG6AUJzN4DLLIETr/B02eU5+kz7z39UK6uIDfBLpnYqdtc8URLLmiwX8PD1CkO7nLET2NlfSsRRE9jXvgshzmPsg0mcu0lQVufCa2jE2ROhuccyTFK6fX1R2fKvi4TBGJImTCXoiROALqhXrsmhTxCAKojPfqBmoy9L9f+dJzoEWDpCZri6cab5mBkzLC6AgAFGweRCAgoSaowQEqmGeuxSUgXnn/1fE756jAVxBQyHyFHOuu1gADpUtfOfrFhOyXS6dWcA1joq+X9+a+IyrAnWl1recTNrDXcy/Ph8iVbh4OgVxcwtbNeJaTVVBl+wY0xwzl2a6eiWculFtc9S+yH0hlPkBoA+EM3cADmQwaLeqT9gtcjhku42cgwPIaARd8u2mP6EkDQvp61kkAAAAAElFTkSuQmCC\"","import 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport closeIcon from '../img/bi_x-octagon.png';\nimport SimpleLightbox from 'simplelightbox';\n\nexport const renderPhoto = function (photos) {\n  const markup = photos\n    .map(\n      ({\n        largeImageURL,\n        webformatURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `\n        <li class='gallery-item'>\n    <a class='gallery-link' href='${largeImageURL}'>\n      <img class='gallery-image' src='${webformatURL}' alt='${tags}'/>\n    </a>\n  <div class='container-app'>\n  <p><span>Likes</span> ${likes}</p>\n  <p><span>Views</span> ${views}</p>\n  <p><span>Comments</span> ${comments}</p>\n  <p><span>Downloads</span> ${downloads}</p>\n  </div>\n   </li>`\n    )\n    .join('');\n\n  const list = document.querySelector('.gallery');\n  list.innerHTML += markup;\n};\n\nexport const simpleLightbox = function () {\n  let gallery = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionsPosition: 'bottom',\n    captionDelay: 250,\n  });\n  gallery.on('show.simpleLightbox');\n  gallery.refresh();\n};\n\nexport const noImages = function () {\n  iziToast.error({\n    messageColor: '#FFF',\n    color: '#EF4040',\n    iconUrl: closeIcon,\n    position: 'topRight',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n};\n","import axios, { isCancel, AxiosError } from 'axios';\nimport { renderPhoto, simpleLightbox, noImages } from './render-functions';\nimport iziToast from 'izitoast';\nimport closeIcon from '../img/bi_x-octagon.png';\n\nexport default async function getPhotos(inputSearch, page) {\n  const limit = 15;\n  try {\n    const searchParams = new URLSearchParams({\n      key: '42209591-dcd9ad54ecaffcfe9e9b64d04',\n      q: `${inputSearch}`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'false',\n      per_page: limit,\n      page: page,\n    });\n    showSpiner();\n    const result = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n\n    const arrayPhotos = result.data.hits;\n    const totalHits = result.data.totalHits;\n    const totalPages = Math.ceil(totalHits / limit);\n\n    if (arrayPhotos.length === 0) {\n      noImages();\n      const load = document.querySelector('.load');\n\n      load.classList.add('load-more');\n    }\n\n    renderPhoto(arrayPhotos);\n    hideSpiner();\n\n    simpleLightbox();\n    return totalPages;\n  } catch (error) {\n    iziToast.error({\n      messageColor: '#FFF',\n      color: '#EF4040',\n      iconUrl: closeIcon,\n      position: 'topRight',\n      message: `${error}`,\n    });\n  }\n}\n\nexport const showSpiner = function () {\n  const load = document.querySelector('.load');\n  const loaderMore = document.querySelector('.loaderMore');\n  load.classList.add('hidden');\n\n  loaderMore.innerHTML = '<span class=\"loader\"></span>';\n};\n\nexport const hideSpiner = function () {\n  const load = document.querySelector('.load');\n  const loaderMore = document.querySelector('.loaderMore');\n\n  load.classList.remove('hidden');\n  loaderMore.innerHTML = '';\n};\n","import iziToast from 'izitoast';\nimport pixsbyApi from './js/pixaby-api';\nimport closeIcon from './img/bi_x-octagon.png';\nimport { showSpiner, hideSpiner } from './js/pixaby-api';\n\nconst form = document.querySelector('form');\nconst load = document.querySelector('.load');\nconst loaderMore = document.querySelector('.loaderMore');\n// console.log(load);\n\n// load.classList.add(\"hidden\")\n\nform.addEventListener('submit', onSearch);\nload.addEventListener('click', onClickMore);\n\nlet page = 1;\nlet inputSearch;\n\nfunction onSearch(e) {\n  page = 1;\n  inputSearch = form.elements.search.value;\n  const list = document.querySelector('.gallery');\n  list.innerHTML = '';\n\n  onSearchButton(e);\n}\n\nasync function onClickMore(e) {\n  page += 1;\n  const totalPage = await onSearchButton(e);\n\n  if (page >= totalPage) {\n    iziToast.error({\n      messageColor: '#FFF',\n      color: 'blue',\n      iconUrl: closeIcon,\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n\n  smoothScroll();\n}\n\nasync function onSearchButton(e) {\n  e.preventDefault();\n\n  if (inputSearch === '') {\n    iziToast.error({\n      messageColor: '#FFF',\n      color: '#EF4040',\n      iconUrl: closeIcon,\n      position: 'topRight',\n      message: 'Please,enter what do you want to find!',\n    });\n    return;\n  }\n\n  const totalPage = await pixsbyApi(inputSearch, page);\n\n  // if (hists.length === 0) {\n  //   const load = document.querySelector('.load');\n\n  //   load.classList.add('hidden');\n  // }\n\n  form.reset();\n  return totalPage;\n}\n\nfunction smoothScroll() {\n  const galleryCardHeight = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n  window.scrollBy({\n    top: galleryCardHeight * 2,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n"],"names":["closeIcon","renderPhoto","photos","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","list","simpleLightbox","gallery","SimpleLightbox","noImages","iziToast","getPhotos","inputSearch","page","searchParams","showSpiner","result","axios","arrayPhotos","totalHits","totalPages","hideSpiner","error","load","loaderMore","form","onSearch","onClickMore","e","onSearchButton","totalPage","smoothScroll","pixsbyApi","galleryCardHeight"],"mappings":"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"}